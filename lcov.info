

  e2e applications
Application ready to serve requests.
Environment: test
    create new user
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success (83ms)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success friend
    get token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - get my token
    create application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create application - create application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create application - create application without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create application - create second application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create application - validate fail
    read application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - list my application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - list my application without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications?name=SecondApplication HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - list my application with filter
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications?limit=1&page=2 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications?limit=1&page=40 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - see my new application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/59567b8c02aa644c02270ca0 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - error id
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - see my new application without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/autocomplete?complete=second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application -  autocomplete
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/autocomplete HTTP/1.1" - - "-" "node-superagent/3.5.2"
{ name: 'NotFoundError',
  message: 'not found error',
  errors: 'Not Found' }
      ✓ Exist application -  autocomplete - not found
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/autocomplete?complete=second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application -  autocomplete without token
    update application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "PATCH /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "PATCH /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - invalid data to update application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "PATCH /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - try to update application withou token
    confirm update application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - confirm my changes
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - confirm if my update dont create new application
    e2e teams: add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /applications/59567b8c02aa644c02270ca3/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - valid data to add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /applications/59567b8c02aa644c02270ca3/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - invalid data to add roles (miss role)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "POST /applications/59567b8c02aa644c02270ca3/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - add roles without token
    get roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news roles
    update roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "PUT /applications/59567b8c02aa644c02270ca3/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "PUT /applications/59567b8c02aa644c02270ca3/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - update role application without token
    confirm update roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "GET /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news applications
    delete roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:48 +0000] "DELETE /applications/59567b8c02aa644c02270ca3/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /applications/59567b8c02aa644c02270ca3/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role without token
    confirm delete roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news role
    delete application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /applications/59567b8c02aa644c02270ca3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my application
    confirm to delete application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /applications/ HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my application
    create team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team
    create team application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270ca4/applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team application - create team application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270ca4/applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team application - create second application
    read team application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - list my application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - list my application without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications?name=SecondApplicationT HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - list my application with filter
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications?limit=1&page=2 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - see my new application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - see my new application without token
    update team application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - invalid data to update application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - try to update application withou token
    confirm team update application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - confirm my changes
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team application - confirm if my update dont create new application
    e2e add teams in team: add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - valid data to add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team members - invalid data to add roles (miss role)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team members - add roles without token
    get team roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca4 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - wrong id
    update teams roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role application - validation
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist teams members - update role application without token
    confirm team update roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news applications
    delete team roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6/roles/59567b8c02aa644c02270ca1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team roles - delete role without token
    confirm team delete roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news role
    delete team application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /teams/59567b8d02aa644c02270ca4/applications/59567b8d02aa644c02270ca6 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my application
    confirm team  delete application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270ca4/applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my application

  e2e architectures
Application ready to serve requests.
Environment: test
    create new user
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success friend
    get token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - get my token
    create architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create architecture - create architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create architecture - create architecture without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create architecture - create second architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create architecture - validate fail
    read architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - list my architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - list my architecture without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures?name=Secondarchitecture HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - list my architecture with filter
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures?limit=1&page=2 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures?limit=1&page=40 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architectures - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - see my new architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - see my new architecture without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/autocomplete?complete=second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architectures -  autocomplete
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/autocomplete HTTP/1.1" - - "-" "node-superagent/3.5.2"
{ name: 'NotFoundError',
  message: 'not found error',
  errors: 'Not Found' }
      ✓ Exist architectures -  autocomplete - not found
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/autocomplete?complete=second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture -  autocomplete without token
    update architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - update architecture with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - invalid data to update architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - try to update architecture withou token
    confirm update architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - confirm my changes
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - confirm if my update dont create new architecture
    e2e teams: add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /architectures/59567b8d02aa644c02270caa/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - valid data to add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /architectures/59567b8d02aa644c02270caa/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - invalid data to add roles (miss role)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /architectures/59567b8d02aa644c02270caa/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - add roles without token
    get roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news roles
    update roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PUT /architectures/59567b8d02aa644c02270caa/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PUT /architectures/59567b8d02aa644c02270caa/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - update role architecture without token
    confirm update roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news architectures
    delete roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /architectures/59567b8d02aa644c02270caa/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /architectures/59567b8d02aa644c02270caa/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role without token
    confirm delete roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news role
    delete architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /architectures/59567b8d02aa644c02270caa HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my architecture
    confirm to delete architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /architectures/ HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my architecture
    create team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team
    create team architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270cab/architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team architecture - create team architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270cab/architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team architecture - create second architecture
    read team architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist architecture - list my architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - list my architecture without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures?name=SecondarchitectureT HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - list my architecture with filter
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures?limit=1&page=2 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - see my new architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - see my new architecture without token
    update team architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - update architecture with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - invalid data to update architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - try to update architecture withou token
    confirm team update architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - confirm my changes
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team architecture - confirm if my update dont create new architecture
    e2e add teams in team: add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - valid data to add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team members - invalid data to add roles (miss role)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "POST /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team members - add roles without token
    get team roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news roles
    update teams roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role application - validation
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "PATCH /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist teams members - update role architecture without token
    confirm team update roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news architectures
    delete team roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad/roles/59567b8d02aa644c02270ca8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team roles - delete role without token
    confirm team delete roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news role
    delete team architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:49 +0000] "DELETE /teams/59567b8d02aa644c02270cab/architectures/59567b8d02aa644c02270cad HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my architecture
    confirm team  delete architecture
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8d02aa644c02270cab/architectures HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my architecture

  e2e auth: auth and login
Application ready to serve requests.
Environment: test
    e2e auth: create new user
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - validation all data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - validation email
    e2e auth: exist user, test conflict creation and login
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist account - conflict
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist account - right login
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist account - wrong login
    e2e auth: exist user, test token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist account - valid token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist account - invalid token

  e2e - server up
Application ready to serve requests.
Environment: test
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.5.2"
    ✓ Welcome msg

  e2e projects
Application ready to serve requests.
Environment: test
    e2e users: create new user
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success
    e2e users: get token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - get my token
    create project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create project - create project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create project - create project without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create project - create second project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create project - validate fail project
    read project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - list my project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - list my project without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects?name=SecondProject HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - list my project with filter
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects/59567b8e02aa644c02270cb1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - see my new project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects/59567b8e02aa644c02270cb1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - see my new project without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects/autocomplete?complete=My HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project -  autocomplete
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects/autocomplete?complete=second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project -  autocomplete without token
    update project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /projects/59567b8e02aa644c02270cb1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - update project with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /projects/59567b8e02aa644c02270cb1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - invalid data to update project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /projects/59567b8e02aa644c02270cb1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - try to update project without token
    confirm update project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects/59567b8e02aa644c02270cb1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist projects - confirm my changes
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - confirm if my update dont create a new project
    delete project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /projects/59567b8e02aa644c02270cb1 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - delete my project
    confirm delete project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects/ HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - delete my project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /projects/autocomplete?complete=Second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project -  autocomplete
    create team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success friend
    create team project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams/59567b8e02aa644c02270cb2/projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team project - create team project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams/59567b8e02aa644c02270cb2/projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team project - create second project
    read team project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist project - list my project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - list my project without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects?name=SecondprojectT HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - list my project with filter
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects?limit=1&page=2 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - see my new project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - see my new project without token
    update team project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - update project with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - invalid data to update project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - try to update project withou token
    confirm team update project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - confirm my changes
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team project - confirm if my update dont create new project
    e2e add teams in team: add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - valid data to add roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team members - invalid data to add roles (miss role)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team members - add roles without token
    get team roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news roles
    update teams roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles/59567b8e02aa644c02270cb3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles/59567b8e02aa644c02270cb3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role application - validation
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles/59567b8e02aa644c02270cb3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist teams members - update role project without token
    confirm team update roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news projects
    delete team roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles/59567b8e02aa644c02270cb3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb3/roles/59567b8e02aa644c02270cb3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete role - wrong id team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5/roles/59567b8e02aa644c02270cb3 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team roles - delete role without token
    confirm team delete roles
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - confirm my news role
    delete team project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /teams/59567b8e02aa644c02270cb2/projects/59567b8e02aa644c02270cb5 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my project
    confirm team  delete project
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cb2/projects HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - delete my project

  e2e check access roles
Application ready to serve requests.
Environment: test
    create new user
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success friend
    get token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - get my token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - get friend token
    create application
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /applications HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create application - create application
    add member into application - role 1
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /applications/59567b8e02aa644c02270cb8/roles HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - add roles
    test get and try to update team with friend
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - delete team
    update role friend into 3
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PUT /applications/59567b8e02aa644c02270cb8/roles/59567b8e02aa644c02270cb7 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role 3 application
    test get and update team with friend
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - delete team
    update role friend into 7
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PUT /applications/59567b8e02aa644c02270cb8/roles/59567b8e02aa644c02270cb7 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist roles - update role 7 application
    delete the team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - update application with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "DELETE /applications/59567b8e02aa644c02270cb8 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist application - delete team

  e2e teams
Application ready to serve requests.
Environment: test
    create new user
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success friend
    get token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - get my token
    create team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team - create team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team - create team without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team - create second team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "POST /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create team - validate fail
    read team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - list my team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - list my team without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams?name=SecondTeam HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - list my team with filter
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams?limit=1&page=2 HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - test pagination list
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - see my new team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - see my new team without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/autocomplete?complete=second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team -  autocomplete
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/autocomplete?complete=second HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team -  autocomplete without token
    update team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - update team with valid data
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - invalid data to update team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "PATCH /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - try to update team withou token
    confirm update team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:50 +0000] "GET /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - confirm my changes
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /teams HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist team - confirm if my update dont create new team
    add members
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /teams/59567b8e02aa644c02270cbc/members HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - valid data to add members
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /teams/59567b8e02aa644c02270cbc/members HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - invalid data to add members (miss role)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /teams/59567b8e02aa644c02270cbc/members HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - add members withou token
    get members
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - confirm my news members
    update members
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /teams/59567b8e02aa644c02270cbc/members/59567b8e02aa644c02270cba HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - update role member
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /teams/59567b8e02aa644c02270cbc/members/59567b8e02aa644c02270cba HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - update role member without token
    confirm update members
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - confirm my news members
    delete members
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "DELETE /teams/59567b8e02aa644c02270cbc/members/59567b8e02aa644c02270cba HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - delete member
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "DELETE /teams/59567b8e02aa644c02270cbc/members/59567b8e02aa644c02270cba HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - delete member without token
    confirm delete members
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - confirm my news members
    delete team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "DELETE /teams/59567b8e02aa644c02270cbc HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - delete my team
    confirm to delete team
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /teams/ HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist members - delete my team

  e2e users
Application ready to serve requests.
Environment: test
    create new user
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /users HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Create account - success
    get token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - get my token
    get users, autocomplete
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - see my changes - /me
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /users/autocomplete?complete=maestro HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - autocomplete
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /users/upload?filetype=image%2Fjpeg HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - Upload Files
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /users/upload HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - Upload Files - error
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /users/upload HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - Upload Files - without token
    update my account
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - update my account without token
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - update my account
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - update my account by with exist email
    see my updates
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - see my changes - /me
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /users/59567b8f02aa644c02270cbd HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Exist user - see my changes - /:id
    change password
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PATCH /users/auth/pass HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - change my password
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PATCH /users/auth/pass HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - valid newpass change pass
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PATCH /users/auth/pass HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - change password, without token
    change password again
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PATCH /users/auth/pass HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - try to change my password again
    change email
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - change my email
    test my new email and password
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - test with same pass and email
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /users/auth HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - get new token with new email and password
    forgot my password
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /users/forgot HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ If i make a get, dont call id users
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /users/forgot HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - forgot callback url
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /users/forgot HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - valid forgot - email not found
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "POST /users/forgot HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - valid forgot (194ms)
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /users/forgot/change HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - change password - miss token and password
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "PUT /users/forgot/change HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - change password - token and password token
    delete account
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "DELETE /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Existe user - delete my account
    confirm if i am deleted
::ffff:127.0.0.1 - - [30/Jun/2017:16:25:51 +0000] "GET /me HTTP/1.1" - - "-" "node-superagent/3.5.2"
      ✓ Deleted user - confirm

  integration - core
    repositories
      ✓ smtp - mailerConnection
      ✓ smtp - factoryMailer (108ms)
      ✓ smtp - factoryMailer - isConnected
      DBRepository
        create
          ✓ create
          ✓ create 2
        find
          ✓ find
        update
          ✓ find
        test update
          ✓ findOne

  unit - core
    ✓ applications - transform - baseurl
    ✓ applications - transform - createLinkPagination
    ✓ applications - transform - createLinkPagination
    ✓ applications - transform - factoryObjHateoas
    ✓ applications - transform - formatFirstRole - default values
    ✓ applications - transform - formatFirstRole - all params
    ✓ applications - transform - hateoasTransform - accessSingleRoleRefs
    ✓ applications - transform - hateoasTransform - collectionTransform
    ✓ applications - transform - hateoasTransform - singleTransform
    ✓ applications - validator - validAccessEmpty
    ✓ applications - validator - validAccessEmpty
    ✓ applications - validator - validNotFound
    ✓ applications - validator - validNotFound
    ✓ applications - accessApplication
    ✓ libs - crypto
    ✓ libs - factoryPromises
    ✓ libs - factoryPromises - reject
    ✓ libs - factoryValid
    ✓ libs - factoryValid - invalid
    ✓ libs - db run
    ✓ repositories - maps - mapFileType
    ✓ repositories - transforms - activeFormat
    ✓ repositories - transforms - activeFormat - desactive
    ✓ repositories - transforms - findFilledFormat
    ✓ repositories - transforms - findFilledFormat - not have filter
    ✓ repositories - validator - validAccessUpdater
    ✓ repositories - validator - validAccessUpdater - throw error
    ✓ services - transforms - accessMergeTransform
    ✓ services - transforms - accessMergeTransform - owner map
    ✓ services - transforms - accessMergeTransform - makeAccess - not id
    ✓ services - transforms - accessMergeTransform - makeAccess
    ✓ services - validator - uploadValid - sizeValidate e typeValidate = true
    ✓ services - validator - uploadValid - typeValidate = false
    ✓ services - validator - uploadValid - check
    ✓ services - validator - validNotFound
    applications - accessApplication
      ✓ update
      ✓ create
      ✓ remove
    applications - persistenceApplication
      ✓ find
      ✓ find - rq2
      ✓ findOne
      ✓ update
      ✓ create
      ✓ create - filter
      ✓ create - witouh access entity
      ✓ remove
    applications - uploadApplication
      ✓ uploader
    services - PersistenceServices
      ✓ find
      ✓ findOne
      ✓ create
      ✓ update
      ✓ remove
    services - UploaderService
      ✓ uploadImage
    services - AccessServices
      ✓ addRoles
      ✓ updateRoles
      ✓ deleteRoles
    services - MailerService
      ✓ sender

  unit - profile
    ✓ services - libs - decodePassForgot
    ✓ services - libs - decodePassForgot - error is not token
    ✓ services - libs - decodePassForgot - test secret KEy


  327 passing (3s)

